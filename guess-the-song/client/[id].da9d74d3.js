import{S as t,i as e,s,e as n,b as a,f as r,d as c,h as l,j as i,k as o,n as d,l as h,o as u,m as f,u as m,p,r as g,v,w as $,x as y,y as w,z as I,t as E,g as b,A as V,B as D,a as k,C as x,c as T,D as N,E as _,F as A,G as B}from"./client.4eb5d82a.js";function C(t){let e,s;return{c(){e=n("div"),s=n("div"),this.h()},l(t){e=a(t,"DIV",{class:!0});var n=r(e);s=a(n,"DIV",{id:!0}),r(s).forEach(c),n.forEach(c),this.h()},h(){l(s,"id",t[0]),l(e,"class","yt-component")},m(t,n){i(t,e,n),o(e,s)},p:d,i:d,o:d,d(t){t&&c(e)}}}let j=!1;function S(t,e,s){let n;const a=h();let r,c="player_"+parseInt(1e5*Math.random()).toString(),{videoId:l}=e,{height:i="390"}=e,{width:o="640"}=e;function d(t){a("StateChange",t)}return u(()=>{let t="https://www.youtube.com/iframe_api?origin=http://localhost:3000";if(!function(t=""){for(var e=document.getElementsByTagName("script"),s=e.length;s--;)if(e[s].src==t)return!0;return!1}(t)){var e=document.createElement("script");e.src=t;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(e,s)}function h(){n=new YT.Player(c,{height:i,width:o,videoId:l,playerVars:{autoplay:1,disablekb:1,fs:0},events:{onStateChange:d}});let t=0;r=setInterval((function(){let e=t;n&&n.getCurrentTime&&(t=n.getCurrentTime()),t!==e&&a("timeupdate",t)}),800)}return window.onYouTubeIframeAPIReady=function(){window.dispatchEvent(new Event("YouTubeIframeAPIReady"))},window.addEventListener("YouTubeIframeAPIReady",(function(){0==j&&(j=!0,h())})),j&&h(),()=>r&&clearInterval(r)}),t.$$set=t=>{"videoId"in t&&s(1,l=t.videoId),"height"in t&&s(2,i=t.height),"width"in t&&s(3,o=t.width)},[c,l,i,o,function(){n.playVideo()}]}class P extends t{constructor(t){super(),e(this,t,S,C,s,{videoId:1,height:2,width:3,playVideo:4})}get playVideo(){return this.$$.ctx[4]}}function Y(t,e,s){const n=t.slice();return n[4]=e[s],n}function R(t,e){let s,n;const a=e[3].default,r=w(a,e,e[2],null);return{key:t,first:null,c(){s=f(),r&&r.c(),this.h()},l(t){s=f(),r&&r.l(t),this.h()},h(){this.first=s},m(t,e){i(t,s,e),r&&r.m(t,e),n=!0},p(t,e){r&&r.p&&4&e&&m(r,a,t,t[2],e,null,null)},i(t){n||(p(r,t),n=!0)},o(t){g(r,t),n=!1},d(t){t&&c(s),r&&r.d(t)}}}function M(t){let e,s,n=[],a=new Map,r=t[1];const l=t=>t[0];for(let e=0;e<r.length;e+=1){let s=Y(t,r,e),c=l(s);a.set(c,n[e]=R(c,s))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=f()},l(t){for(let e=0;e<n.length;e+=1)n[e].l(t);e=f()},m(t,a){for(let e=0;e<n.length;e+=1)n[e].m(t,a);i(t,e,a),s=!0},p(t,[s]){if(4&s){const r=t[1];v(),n=$(n,s,l,1,t,r,a,e.parentNode,I,R,e,Y),y()}},i(t){if(!s){for(let t=0;t<r.length;t+=1)p(n[t]);s=!0}},o(t){for(let t=0;t<n.length;t+=1)g(n[t]);s=!1},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&c(e)}}}function O(t,e,s){let{key:n}=e;let{$$slots:a={},$$scope:r}=e;return t.$$set=t=>{"key"in t&&s(0,n=t.key),"$$scope"in t&&s(2,r=t.$$scope)},[n,[0],r,a]}class U extends t{constructor(t){super(),e(this,t,O,M,s,{key:0})}}function z(t,e,s){const n=t.slice();return n[12]=e[s],n}function F(t){let e,s,h,u,f,m,p;return{c(){e=n("div"),s=n("div"),h=n("div"),u=n("button"),f=E("Начать!"),this.h()},l(t){e=a(t,"DIV",{class:!0});var n=r(e);s=a(n,"DIV",{class:!0});var l=r(s);h=a(l,"DIV",{class:!0});var i=r(h);u=a(i,"BUTTON",{class:!0});var o=r(u);f=b(o,"Начать!"),o.forEach(c),i.forEach(c),l.forEach(c),n.forEach(c),this.h()},h(){l(u,"class","btn btn-secondary btn-block btn-lg"),l(h,"class","col-md-6"),l(s,"class","row h-100 py-5 justify-content-center align-items-center"),l(e,"class","container py-5")},m(n,a){i(n,e,a),o(e,s),o(s,h),o(h,u),o(u,f),m||(p=V(u,"click",t[9]),m=!0)},p:d,i:d,o:d,d(t){t&&c(e),m=!1,p()}}}function G(t){let e,s,d,h,u,f,m,v,$,y,w,I,V;f=new U({props:{key:t[0].yt_id,$$slots:{default:[L]},$$scope:{ctx:t}}});let A=t[2].id&&q(t);return{c(){e=n("div"),s=n("div"),d=n("div"),h=n("div"),u=n("div"),D(f.$$.fragment),m=k(),A&&A.c(),v=k(),$=n("div"),y=n("a"),w=E("Следующий"),this.h()},l(t){e=a(t,"DIV",{class:!0});var n=r(e);s=a(n,"DIV",{class:!0});var l=r(s);d=a(l,"DIV",{class:!0});var i=r(d);h=a(i,"DIV",{class:!0});var o=r(h);u=a(o,"DIV",{class:!0});var p=r(u);x(f.$$.fragment,p),p.forEach(c),o.forEach(c),i.forEach(c),m=T(l),A&&A.l(l),v=T(l),$=a(l,"DIV",{class:!0});var g=r($);y=a(g,"A",{rel:!0,href:!0});var I=r(y);w=b(I,"Следующий"),I.forEach(c),g.forEach(c),l.forEach(c),n.forEach(c),this.h()},h(){l(u,"class","inner svelte-16iul4o"),l(h,"class","wrap svelte-16iul4o"),l(d,"class","col-12"),l(y,"rel","prefetch"),l(y,"href",I="/game/"+(Number(t[1])+1)),l($,"class","col-auto mt-3 mx-auto"),l(s,"class","row"),l(e,"class","container py-5")},m(t,n){i(t,e,n),o(e,s),o(s,d),o(d,h),o(h,u),N(f,u,null),o(s,m),A&&A.m(s,null),o(s,v),o(s,$),o($,y),o(y,w),V=!0},p(t,e){const n={};1&e&&(n.key=t[0].yt_id),32785&e&&(n.$$scope={dirty:e,ctx:t}),f.$set(n),t[2].id?A?A.p(t,e):(A=q(t),A.c(),A.m(s,v)):A&&(A.d(1),A=null),(!V||2&e&&I!==(I="/game/"+(Number(t[1])+1)))&&l(y,"href",I)},i(t){V||(p(f.$$.fragment,t),V=!0)},o(t){g(f.$$.fragment,t),V=!1},d(t){t&&c(e),_(f),A&&A.d()}}}function L(t){let e,s;return e=new P({props:{key:t[0].yt_id,height:"100%",width:"100%",videoId:t[0].yt_id}}),e.$on("timeupdate",t[7]),e.$on("StateChange",t[6]),{c(){D(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,n){N(e,t,n),s=!0},p(t,s){const n={};1&s&&(n.key=t[0].yt_id),1&s&&(n.videoId=t[0].yt_id),e.$set(n)},i(t){s||(p(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){_(e,t)}}}function q(t){let e;function s(t,e){return void 0===t[5]?K:t[5]===t[2].rightAnswer?J:H}let n=s(t),a=n(t);return{c(){a.c(),e=f()},l(t){a.l(t),e=f()},m(t,s){a.m(t,s),i(t,e,s)},p(t,r){n===(n=s(t))&&a?a.p(t,r):(a.d(1),a=n(t),a&&(a.c(),a.m(e.parentNode,e)))},d(t){a.d(t),t&&c(e)}}}function H(t){let e,s,h,u,f;return{c(){e=n("div"),s=n("div"),h=E("Неправильный ответ"),u=k(),f=n("div"),this.h()},l(t){e=a(t,"DIV",{class:!0});var n=r(e);s=a(n,"DIV",{class:!0});var l=r(s);h=b(l,"Неправильный ответ"),l.forEach(c),n.forEach(c),u=T(t),f=a(t,"DIV",{class:!0}),r(f).forEach(c),this.h()},h(){l(s,"class","alert alert-danger"),l(e,"class","col-md-6 mx-auto mt-3"),l(f,"class","w-100")},m(t,n){i(t,e,n),o(e,s),o(s,h),i(t,u,n),i(t,f,n)},p:d,d(t){t&&c(e),t&&c(u),t&&c(f)}}}function J(t){let e,s,h,u,f;return{c(){e=n("div"),s=n("div"),h=E("Правильный ответ"),u=k(),f=n("div"),this.h()},l(t){e=a(t,"DIV",{class:!0});var n=r(e);s=a(n,"DIV",{class:!0});var l=r(s);h=b(l,"Правильный ответ"),l.forEach(c),n.forEach(c),u=T(t),f=a(t,"DIV",{class:!0}),r(f).forEach(c),this.h()},h(){l(s,"class","alert alert-success"),l(e,"class","col-md-6 mx-auto mt-3"),l(f,"class","w-100")},m(t,n){i(t,e,n),o(e,s),o(s,h),i(t,u,n),i(t,f,n)},p:d,d(t){t&&c(e),t&&c(u),t&&c(f)}}}function K(t){let e,s=t[2].answers,n=[];for(let e=0;e<s.length;e+=1)n[e]=Q(z(t,s,e));return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=f()},l(t){for(let e=0;e<n.length;e+=1)n[e].l(t);e=f()},m(t,s){for(let e=0;e<n.length;e+=1)n[e].m(t,s);i(t,e,s)},p(t,a){if(36&a){let r;for(s=t[2].answers,r=0;r<s.length;r+=1){const c=z(t,s,r);n[r]?n[r].p(c,a):(n[r]=Q(c),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}},d(t){B(n,t),t&&c(e)}}}function Q(t){let e,s,d,h,u,f,m=t[12]+"";function p(...e){return t[8](t[12],...e)}return{c(){e=n("div"),s=n("button"),d=E(m),h=k(),this.h()},l(t){e=a(t,"DIV",{class:!0});var n=r(e);s=a(n,"BUTTON",{class:!0});var l=r(s);d=b(l,m),l.forEach(c),h=T(n),n.forEach(c),this.h()},h(){l(s,"class","btn btn-secondary btn-block btn-lg"),l(e,"class","col-md-6 mt-3")},m(t,n){i(t,e,n),o(e,s),o(s,d),o(e,h),u||(f=V(s,"click",p),u=!0)},p(e,s){t=e,4&s&&m!==(m=t[12]+"")&&A(d,m)},d(t){t&&c(e),u=!1,f()}}}function W(t){let e,s,n,a;const r=[G,F],l=[];function o(t,e){return t[3]?0:1}return e=o(t),s=l[e]=r[e](t),{c(){s.c(),n=f()},l(t){s.l(t),n=f()},m(t,s){l[e].m(t,s),i(t,n,s),a=!0},p(t,[a]){let c=e;e=o(t),e===c?l[e].p(t,a):(v(),g(l[c],1,1,()=>{l[c]=null}),y(),s=l[e],s||(s=l[e]=r[e](t),s.c()),p(s,1),s.m(n.parentNode,n))},i(t){a||(p(s),a=!0)},o(t){g(s),a=!1},d(t){l[e].d(t),t&&c(n)}}}async function X(t,e){const{id:s}=t.params,n=await this.fetch(`game/${s}.json`);return{game:await n.json(),id:s}}function Z(t,e,s){let n,{game:a}=e,{id:r}=e,c={},l=!1,i=0;return t.$$set=t=>{"game"in t&&s(0,a=t.game),"id"in t&&s(1,r=t.id)},t.$$.update=()=>{16&t.$$.dirty&&function(t){let e=a.songs.find(e=>t>=e.guess[0]&&t<=e.answer[1]);e&&(e.id!==c.id&&(s(2,c=e),s(5,n=void 0)),c.id&&t>=c.answer[0]&&t<=c.answer[1]&&(n||s(5,n=!1)))}(i)},[a,r,c,l,i,n,function({detail:t}){t.data},({detail:t})=>s(4,i=t),t=>s(5,n=t),()=>s(3,l=!0)]}export default class extends t{constructor(t){super(),e(this,t,Z,W,s,{game:0,id:1})}}export{X as preload};
