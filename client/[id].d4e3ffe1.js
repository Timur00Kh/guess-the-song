import{S as t,i as e,s as n,e as s,b as a,f as r,d as l,h as c,j as i,k as o,n as d,l as h,o as u,m as f,u as m,p,r as g,v,w as $,x as y,y as w,z as I,t as E,g as V,A as b,B as D,a as k,C as x,c as T,D as N,E as _,F as A,G as B}from"./client.a55d71de.js";function C(t){let e,n;return{c(){e=s("div"),n=s("div"),this.h()},l(t){e=a(t,"DIV",{class:!0});var s=r(e);n=a(s,"DIV",{id:!0}),r(n).forEach(l),s.forEach(l),this.h()},h(){c(n,"id",t[0]),c(e,"class","yt-component")},m(t,s){i(t,e,s),o(e,n)},p:d,i:d,o:d,d(t){t&&l(e)}}}let j=!1;function S(t,e,n){let s;const a=h();let r,l="player_"+parseInt(1e5*Math.random()).toString(),{videoId:c}=e,{height:i="390"}=e,{width:o="640"}=e;function d(t){a("StateChange",t)}return u(()=>{let t="https://www.youtube.com/iframe_api?origin=http://localhost:3000";if(!function(t=""){for(var e=document.getElementsByTagName("script"),n=e.length;n--;)if(e[n].src==t)return!0;return!1}(t)){var e=document.createElement("script");e.src=t;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}function h(){s=new YT.Player(l,{height:i,width:o,videoId:c,playerVars:{autoplay:1,disablekb:1,fs:0},events:{onStateChange:d}});let t=0;r=setInterval((function(){let e=t;s&&s.getCurrentTime&&(t=s.getCurrentTime()),t!==e&&a("timeupdate",t)}),800)}return window.onYouTubeIframeAPIReady=function(){window.dispatchEvent(new Event("YouTubeIframeAPIReady"))},window.addEventListener("YouTubeIframeAPIReady",(function(){0==j&&(j=!0,h())})),j&&h(),()=>r&&clearInterval(r)}),t.$$set=t=>{"videoId"in t&&n(1,c=t.videoId),"height"in t&&n(2,i=t.height),"width"in t&&n(3,o=t.width)},[l,c,i,o,function(){s.playVideo()}]}class M extends t{constructor(t){super(),e(this,t,S,C,n,{videoId:1,height:2,width:3,playVideo:4})}get playVideo(){return this.$$.ctx[4]}}function P(t,e,n){const s=t.slice();return s[4]=e[n],s}function Y(t,e){let n,s;const a=e[3].default,r=w(a,e,e[2],null);return{key:t,first:null,c(){n=f(),r&&r.c(),this.h()},l(t){n=f(),r&&r.l(t),this.h()},h(){this.first=n},m(t,e){i(t,n,e),r&&r.m(t,e),s=!0},p(t,e){r&&r.p&&4&e&&m(r,a,t,t[2],e,null,null)},i(t){s||(p(r,t),s=!0)},o(t){g(r,t),s=!1},d(t){t&&l(n),r&&r.d(t)}}}function R(t){let e,n,s=[],a=new Map,r=t[1];const c=t=>t[0];for(let e=0;e<r.length;e+=1){let n=P(t,r,e),l=c(n);a.set(l,s[e]=Y(l,n))}return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=f()},l(t){for(let e=0;e<s.length;e+=1)s[e].l(t);e=f()},m(t,a){for(let e=0;e<s.length;e+=1)s[e].m(t,a);i(t,e,a),n=!0},p(t,[n]){if(4&n){const r=t[1];v(),s=$(s,n,c,1,t,r,a,e.parentNode,I,Y,e,P),y()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)p(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)g(s[t]);n=!1},d(t){for(let e=0;e<s.length;e+=1)s[e].d(t);t&&l(e)}}}function O(t,e,n){let{key:s}=e;let{$$slots:a={},$$scope:r}=e;return t.$$set=t=>{"key"in t&&n(0,s=t.key),"$$scope"in t&&n(2,r=t.$$scope)},[s,[0],r,a]}class U extends t{constructor(t){super(),e(this,t,O,R,n,{key:0})}}function z(t){for(let e=t.length-1;e>0;e--){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}function F(t,e,n){const s=t.slice();return s[12]=e[n],s}function G(t){let e,n,h,u,f,m,p;return{c(){e=s("div"),n=s("div"),h=s("div"),u=s("button"),f=E("Начать!"),this.h()},l(t){e=a(t,"DIV",{class:!0});var s=r(e);n=a(s,"DIV",{class:!0});var c=r(n);h=a(c,"DIV",{class:!0});var i=r(h);u=a(i,"BUTTON",{class:!0});var o=r(u);f=V(o,"Начать!"),o.forEach(l),i.forEach(l),c.forEach(l),s.forEach(l),this.h()},h(){c(u,"class","btn btn-secondary btn-block btn-lg"),c(h,"class","col-md-6"),c(n,"class","row h-100 py-5 justify-content-center align-items-center"),c(e,"class","container py-5")},m(s,a){i(s,e,a),o(e,n),o(n,h),o(h,u),o(u,f),m||(p=b(u,"click",t[9]),m=!0)},p:d,i:d,o:d,d(t){t&&l(e),m=!1,p()}}}function L(t){let e,n,d,h,u,f,m,v,$,y,w,I,b;f=new U({props:{key:t[0].yt_id,$$slots:{default:[q]},$$scope:{ctx:t}}});let A=t[2].id&&H(t);return{c(){e=s("div"),n=s("div"),d=s("div"),h=s("div"),u=s("div"),D(f.$$.fragment),m=k(),A&&A.c(),v=k(),$=s("div"),y=s("a"),w=E("Следующий"),this.h()},l(t){e=a(t,"DIV",{class:!0});var s=r(e);n=a(s,"DIV",{class:!0});var c=r(n);d=a(c,"DIV",{class:!0});var i=r(d);h=a(i,"DIV",{class:!0});var o=r(h);u=a(o,"DIV",{class:!0});var p=r(u);x(f.$$.fragment,p),p.forEach(l),o.forEach(l),i.forEach(l),m=T(c),A&&A.l(c),v=T(c),$=a(c,"DIV",{class:!0});var g=r($);y=a(g,"A",{rel:!0,href:!0});var I=r(y);w=V(I,"Следующий"),I.forEach(l),g.forEach(l),c.forEach(l),s.forEach(l),this.h()},h(){c(u,"class","inner svelte-16iul4o"),c(h,"class","wrap svelte-16iul4o"),c(d,"class","col-12"),c(y,"rel","prefetch"),c(y,"href",I="/game/"+(Number(t[1])+1)),c($,"class","col-auto mt-3 mx-auto"),c(n,"class","row"),c(e,"class","container py-5")},m(t,s){i(t,e,s),o(e,n),o(n,d),o(d,h),o(h,u),N(f,u,null),o(n,m),A&&A.m(n,null),o(n,v),o(n,$),o($,y),o(y,w),b=!0},p(t,e){const s={};1&e&&(s.key=t[0].yt_id),32785&e&&(s.$$scope={dirty:e,ctx:t}),f.$set(s),t[2].id?A?A.p(t,e):(A=H(t),A.c(),A.m(n,v)):A&&(A.d(1),A=null),(!b||2&e&&I!==(I="/game/"+(Number(t[1])+1)))&&c(y,"href",I)},i(t){b||(p(f.$$.fragment,t),b=!0)},o(t){g(f.$$.fragment,t),b=!1},d(t){t&&l(e),_(f),A&&A.d()}}}function q(t){let e,n;return e=new M({props:{key:t[0].yt_id,height:"100%",width:"100%",videoId:t[0].yt_id}}),e.$on("timeupdate",t[7]),e.$on("StateChange",t[6]),{c(){D(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,s){N(e,t,s),n=!0},p(t,n){const s={};1&n&&(s.key=t[0].yt_id),1&n&&(s.videoId=t[0].yt_id),e.$set(s)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function H(t){let e;function n(t,e){return void 0===t[5]?Q:t[5]===t[2].rightAnswer?K:J}let s=n(t),a=s(t);return{c(){a.c(),e=f()},l(t){a.l(t),e=f()},m(t,n){a.m(t,n),i(t,e,n)},p(t,r){s===(s=n(t))&&a?a.p(t,r):(a.d(1),a=s(t),a&&(a.c(),a.m(e.parentNode,e)))},d(t){a.d(t),t&&l(e)}}}function J(t){let e,n,h,u,f;return{c(){e=s("div"),n=s("div"),h=E("Неправильный ответ"),u=k(),f=s("div"),this.h()},l(t){e=a(t,"DIV",{class:!0});var s=r(e);n=a(s,"DIV",{class:!0});var c=r(n);h=V(c,"Неправильный ответ"),c.forEach(l),s.forEach(l),u=T(t),f=a(t,"DIV",{class:!0}),r(f).forEach(l),this.h()},h(){c(n,"class","alert alert-danger"),c(e,"class","col-md-6 mx-auto mt-3"),c(f,"class","w-100")},m(t,s){i(t,e,s),o(e,n),o(n,h),i(t,u,s),i(t,f,s)},p:d,d(t){t&&l(e),t&&l(u),t&&l(f)}}}function K(t){let e,n,h,u,f;return{c(){e=s("div"),n=s("div"),h=E("Правильный ответ"),u=k(),f=s("div"),this.h()},l(t){e=a(t,"DIV",{class:!0});var s=r(e);n=a(s,"DIV",{class:!0});var c=r(n);h=V(c,"Правильный ответ"),c.forEach(l),s.forEach(l),u=T(t),f=a(t,"DIV",{class:!0}),r(f).forEach(l),this.h()},h(){c(n,"class","alert alert-success"),c(e,"class","col-md-6 mx-auto mt-3"),c(f,"class","w-100")},m(t,s){i(t,e,s),o(e,n),o(n,h),i(t,u,s),i(t,f,s)},p:d,d(t){t&&l(e),t&&l(u),t&&l(f)}}}function Q(t){let e,n=t[2].answers,s=[];for(let e=0;e<n.length;e+=1)s[e]=W(F(t,n,e));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=f()},l(t){for(let e=0;e<s.length;e+=1)s[e].l(t);e=f()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);i(t,e,n)},p(t,a){if(36&a){let r;for(n=t[2].answers,r=0;r<n.length;r+=1){const l=F(t,n,r);s[r]?s[r].p(l,a):(s[r]=W(l),s[r].c(),s[r].m(e.parentNode,e))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}},d(t){B(s,t),t&&l(e)}}}function W(t){let e,n,d,h,u,f,m=t[12]+"";function p(...e){return t[8](t[12],...e)}return{c(){e=s("div"),n=s("button"),d=E(m),h=k(),this.h()},l(t){e=a(t,"DIV",{class:!0});var s=r(e);n=a(s,"BUTTON",{class:!0});var c=r(n);d=V(c,m),c.forEach(l),h=T(s),s.forEach(l),this.h()},h(){c(n,"class","btn btn-secondary btn-block btn-lg"),c(e,"class","col-md-6 mt-3")},m(t,s){i(t,e,s),o(e,n),o(n,d),o(e,h),u||(f=b(n,"click",p),u=!0)},p(e,n){t=e,4&n&&m!==(m=t[12]+"")&&A(d,m)},d(t){t&&l(e),u=!1,f()}}}function X(t){let e,n,s,a;const r=[L,G],c=[];function o(t,e){return t[3]?0:1}return e=o(t),n=c[e]=r[e](t),{c(){n.c(),s=f()},l(t){n.l(t),s=f()},m(t,n){c[e].m(t,n),i(t,s,n),a=!0},p(t,[a]){let l=e;e=o(t),e===l?c[e].p(t,a):(v(),g(c[l],1,1,()=>{c[l]=null}),y(),n=c[e],n||(n=c[e]=r[e](t),n.c()),p(n,1),n.m(s.parentNode,s))},i(t){a||(p(n),a=!0)},o(t){g(n),a=!1},d(t){c[e].d(t),t&&l(s)}}}async function Z(t,e){const{id:n}=t.params,s=await this.fetch(`game/${n}.json`);return{game:await s.json(),id:n}}function tt(t,e,n){let s,{game:a}=e,{id:r}=e,l={},c=!1,i=0;return t.$$set=t=>{"game"in t&&n(0,a=t.game),"id"in t&&n(1,r=t.id)},t.$$.update=()=>{16&t.$$.dirty&&function(t){let e=a.songs.find(e=>t>=e.guess[0]&&t<=e.answer[1]);e&&(e.id!==l.id&&(n(2,l={...e,answers:z(e.answers)}),n(5,s=void 0)),l.id&&t>=l.answer[0]&&t<=l.answer[1]&&(s||n(5,s=!1)))}(i)},[a,r,l,c,i,s,function({detail:t}){t.data},({detail:t})=>n(4,i=t),t=>n(5,s=t),()=>n(3,c=!0)]}export default class extends t{constructor(t){super(),e(this,t,tt,X,n,{game:0,id:1})}}export{Z as preload};
